---
description: 
globs: 
alwaysApply: false
---
*Mod by Fong on 2025-07-01--22-38-PM*

# ğŸ“‹ Rule Scan Guidelines | HÆ°á»›ng Dáº«n QuÃ©t Quy Táº¯c

## ğŸ¯ **Má»¥c ÄÃ­ch**
Cung cáº¥p hÆ°á»›ng dáº«n chi tiáº¿t Ä‘á»ƒ quÃ©t, kiá»ƒm tra vÃ  liá»‡t kÃª cÃ¡c quy táº¯c (rules) trong thÆ° má»¥c `.cursor/rules/`.

**LÆ°u Ã½: PHáº¢I Äá»ŒC ná»™i dung file motto báº±ng lá»‡nh `cat` Ä‘á»ƒ hiá»ƒu rÃµ.** `cat .cursor/rules/rule-mottos.mdc | tr -d '[:space:]'` trÆ°á»›c khi lÃ m báº¥t cá»© chuyá»‡n gÃ¬.

## ğŸ§  **Smart File Reading Logic | Logic Äá»c File ThÃ´ng Minh**

### **Quy Táº¯c Äá»c File Tá»‘i Æ¯u**

**Logic Suy NghÄ©** (khÃ´ng pháº£i bash script):

```
BÆ°á»›c 1: Kiá»ƒm tra sá»‘ dÃ²ng file
â†’ wc -l [file-path]

BÆ°á»›c 2: Quyáº¿t Ä‘á»‹nh cÃ¡ch Ä‘á»c
â†’ Náº¿u file < 200 LOC: 
  âœ“ Cháº¡y: cat file.mdc | tr -d '[:space:]'

â†’ Náº¿u file >= 200 LOC:
  âœ“ Cháº¡y tá»«ng lá»‡nh riÃªng láº»:
  âœ“ sed -n '1,200p' file.mdc
  âœ“ sed -n '201,400p' file.mdc  
  âœ“ sed -n '401,$p' file.mdc
```

**VÃ­ dá»¥ thá»±c táº¿:**
```bash
# Kiá»ƒm tra trÆ°á»›c
wc -l .cursor/rules/rule-scan-rules.mdc
# Output: 150 lines â†’ < 200 LOC

# Ãp dá»¥ng: Äá»c vá»›i cat remove spaces
cat .cursor/rules/rule-scan-rules.mdc | tr -d '[:space:]'
```

### **Lá»£i Ãch Logic ThÃ´ng Minh**
- **Performance**: File nhá» Ä‘á»c nhanh vá»›i `tr -d '[:space:]'` (tiáº¿t kiá»‡m token ~17%)
- **Scalability**: File lá»›n Ä‘á»c theo batch Ä‘á»ƒ trÃ¡nh quÃ¡ táº£i
- **Flexibility**: Tá»± Ä‘á»™ng chá»n phÆ°Æ¡ng phÃ¡p Ä‘á»c tá»‘i Æ°u
- **Consistency**: Ãp dá»¥ng cÃ¹ng pattern vá»›i `__init.mdc`

## ğŸ› ï¸ **PhÆ°Æ¡ng PhÃ¡p QuÃ©t Rules**

### 1. **QuÃ©t Chá»‰ File .mdc**
```bash
tree .cursor/rules/ -P "*.mdc"
```
- Hiá»ƒn thá»‹ cÃ¢y thÆ° má»¥c chá»‰ vá»›i cÃ¡c file .mdc
- Bá» qua cÃ¡c thÆ° má»¥c con vÃ  file khÃ¡c
- Cung cáº¥p cÃ¡i nhÃ¬n tá»•ng quan vá» táº¥t cáº£ cÃ¡c rules

### 2. **Kiá»ƒm Tra Manifest.json**
```bash
# Kiá»ƒm tra file cÃ³ tá»“n táº¡i
ls -la .cursor/rules/manifest.json

# Ãp dá»¥ng Smart Reading Logic
wc -l .cursor/rules/manifest.json

# Náº¿u < 200 LOC: Äá»c trá»±c tiáº¿p
cat .cursor/rules/manifest.json | tr -d '[:space:]'

# Náº¿u >= 200 LOC: Äá»c theo tá»«ng pháº§n
sed -n '1,200p' .cursor/rules/manifest.json
sed -n '201,400p' .cursor/rules/manifest.json  
sed -n '401,$p' .cursor/rules/manifest.json
```

## ğŸ“Š **Cáº¥u TrÃºc Manifest.json**

File `manifest.json` chá»©a:
- **rules_count**: Tá»•ng sá»‘ rules
- **rules_directory**: ÄÆ°á»ng dáº«n thÆ° má»¥c rules
- **rules_details**: Array cÃ¡c object vá»›i:
  - `filename`: TÃªn file rule
  - `summary`: TÃ³m táº¯t ná»™i dung rule

## ğŸ” **Workflow Scan Rules**

### **BÆ°á»›c 1**: QuÃ©t file .mdc
```bash
tree .cursor/rules/ -P "*.mdc"
```

### **BÆ°á»›c 2**: Äá»c manifest Ä‘á»ƒ hiá»ƒu ná»™i dung
```bash
# Kiá»ƒm tra kÃ­ch thÆ°á»›c
wc -l .cursor/rules/manifest.json

# Ãp dá»¥ng Smart Reading Logic
if [[ $(wc -l < .cursor/rules/manifest.json) -lt 200 ]]; then
    # File nhá»: Äá»c trá»±c tiáº¿p vá»›i token optimization
    cat .cursor/rules/manifest.json | tr -d '[:space:]'
else
    # File lá»›n: Äá»c theo window sliding (200 LOC má»—i láº§n)
    sed -n '1,200p' .cursor/rules/manifest.json
    # ... tiáº¿p tá»¥c vá»›i cÃ¡c pháº§n tiáº¿p theo
fi
```

### **BÆ°á»›c 3**: PhÃ¢n loáº¡i rules theo chá»©c nÄƒng
- **Documentation Standards**: diagram, documentation references
- **Development Standards**: PHP, JS standards, debugging
- **Memory Management**: DKM get/set, memory alignment
- **File Organization**: architecture, naming conventions
- **Safety & Quality**: database safety, double check

## ğŸ¯ **á»¨ng Dá»¥ng Thá»±c Táº¿**

### **Khi nÃ o sá»­ dá»¥ng?**
- Cáº­p nháº­t danh sÃ¡ch "Quy Táº¯c LiÃªn Quan" trong task
- Kiá»ƒm tra rules má»›i Ä‘Æ°á»£c thÃªm
- Verify rules thá»±c táº¿ tá»“n táº¡i
- Hiá»ƒu overview vá» há»‡ thá»‘ng rules

### **Best Practices**
1. **LuÃ´n scan thá»±c táº¿** thay vÃ¬ assumption
2. **Äá»c manifest** Ä‘á»ƒ hiá»ƒu ná»™i dung rules
3. **PhÃ¢n loáº¡i** rules theo chá»©c nÄƒng
4. **Update** danh sÃ¡ch rules trong task documents

## ğŸš¨ **LÆ°u Ã Quan Trá»ng**

- **Tree filter**: Sá»­ dá»¥ng `-P "*.mdc"` Ä‘á»ƒ chá»‰ hiá»ƒn thá»‹ file .mdc
- **Window sliding**: DÃ¹ng `sed` Ä‘á»ƒ Ä‘á»c file dÃ i theo tá»«ng pháº§n (200 LOC má»—i láº§n)
- **Manifest check**: LuÃ´n kiá»ƒm tra manifest.json Ä‘á»ƒ hiá»ƒu ná»™i dung
- **Relative path**: Cháº¡y tá»« project root Ä‘á»ƒ Ä‘áº£m báº£o Ä‘Æ°á»ng dáº«n Ä‘Ãºng

## ğŸ“ **Template Command Sequence**

```bash
# 1. Navigate to project root
cd /path/to/project

# 2. Scan .mdc files only  
tree .cursor/rules/ -P "*.mdc"

# 3. Apply Smart Reading Logic
wc -l .cursor/rules/manifest.json

# 4. Read based on file size
if [[ $(wc -l < .cursor/rules/manifest.json) -lt 200 ]]; then
    cat .cursor/rules/manifest.json | tr -d '[:space:]'
else
    sed -n '1,200p' .cursor/rules/manifest.json
fi
```

---
**Created**: $(date '+%Y-%m-%d %H:%M:%S')  
**Purpose**: HÆ°á»›ng dáº«n quÃ©t vÃ  phÃ¢n tÃ­ch rules trong .cursor/rules/  
**Status**: Active
